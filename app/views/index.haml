!!!
%head
  %title CloudDevelop

  %link(rel="shortcut icon" href="/favicon.ico?v=#{Time.now.to_i}")

  = stylesheet("css/codemirror")
  = stylesheet("sass/application")
  = javascript("javascript/codemirror-2.34")
  = javascript("javascript/codemirror/mode/#{@language.key}")
  = javascript("javascript/jquery-1.8.2")
  = javascript("coffeescript/application")

  :javascript
    CloudDevelop.init("#{@language.key}");

%body
  - if flash[:notice]
    #flash
      = empty_link("&times;", :class => "dismiss")
      = flash[:notice]

  .header
    %h1 Cloud<span>Develop</span>

  #session
    - if logged_in?
      .status
        = "Logged in as #{current_user.name}"
        %a.action(href="/logout") Log out
    - else
      .status
        %a.action(href="/auth/github") Log in through GitHub

  .menu
    %ul
      %li Languages:
      - Language.all.each do |language|
        - if language == @language
          %li.selected= language.name
        - else
          %li= "<a href=\"/mode/#{language.key}\">#{language.name}</a>"

  .editor
    = haml(:editor, :locals => { :id => "source-editor", :mode => @language.mode, :content => @source || @language.snippets[:source] })

  .result
    = haml(:editor, :locals => { :id => "spec-editor", :mode => @language.mode, :content => @spec || @language.snippets[:spec] })

  .buttons
    %a#clear(href="javascript:void(0);") Clear
    %a#compile(href="javascript:void(0);")= @language.verb
    %a#save(href="javascript:void(0);") Save

  .footer
    %p CloudDevelop maintained by <a href="http://philosopherdeveloper.wordpress.com">Daniel Tao</a>.
